const fs = require("fs");
const db = {
	c: false,
	condense() { this.c = true },
	get(key) {
		const json = this.getAll();
		if (typeof key == "object") {
			const values = [];
			key.forEach((k, i) => (json[k])?values[i] = json[k]:"");
			return values;
		}
		else return json[key];
	},
	set(key, value) {
		const json = this.getAll();
		if (typeof key == "object") Object.keys(key).forEach(k => json[k] = key[k]);
		else json[key] = value;
		this.setAll(json);
	},
	setAll(json) { fs.writeFileSync(__dirname + "/db.json", JSON.stringify(json, null, this.c ? 0 : 2)) },
	getAll() { return JSON.parse(fs.readFileSync(__dirname + "/db.json")) },
	list() { return Object.keys(this.getAll()) },
	delete(key) {
		const json = this.getAll();
		delete json[key];
		this.setAll(json);
	},
	empty() { this.setAll({}) },
};

module.exports = db;